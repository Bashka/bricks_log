# Введение

Данный пакет реализует механизм логирования, отвечающий требованиям [PSR-3][].  
Для этого в нем реализованы следующие классы:

- FileLogger - логер, использующий файл в качестве хранилища
- RelationDbLogger - логер, использующий таблицу в реляционной базе данных в 
  качестве хранилища

## Файловый логер

Для работы с файловым логером используется класс _FileLogger_, экземпляры 
которого инициализируются адресом файла-хранилища и, опционально, префиксом, 
добавляемым ко всем логируемым сообщениям.

Пример использования:
```php
use Bricks\Log\FileLogger;

...
$log = new FileLogger('log/log.txt', '{date}: ');
$log->error('User {user} not found', ['user' => $user->id]);
```

Защищенный метод `prepareMessage` может быть расширен для определения способа 
представления сообщения перед записью в лог. По умолчанию этот метод только 
заменяет плейсхолдеры в сообщении и добавляет ему префикс.

# Логер реляционной базы данных

Для работы с логером реляционной базы данных используется класс 
_RelationDbLogger_, экземпляры которого инициализируются PDO адаптером, именем 
целевой таблицы и, опционально, схемой соответствия данных лога полям этой 
таблицы. Схема представляет собой ассоциативный массив, ключами в котором 
выступают имена целевых полей таблицы, а значениями - следующие маркеры:

- level - уровень логирования
- date - дата создания записи в логе (сохраняется в виде строки формате 
  стандарта ISO 8601)
- message - сообщение

```php
use Bricks\Log\RelationDbLogger;

...
$log = new RelationDbLogger($pdo, 'log', [
  'level' => 'level',
  'added' => 'date',
  'mess' => 'message'
]);
$log->error('User {user} not found', ['user' => $user->id]);
```

Защищенный метод `prepareMessage` может быть расширен для определения способа 
представления сообщения перед записью в лог. По умолчанию этот метод только 
заменяет плейсхолдеры в сообщении и добавляет ему префикс.

[PSR-3]: https://github.com/php-fig/log
